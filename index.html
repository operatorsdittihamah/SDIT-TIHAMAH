<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aplikasi Pendataan Mapping Guru Badal</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
  /* Background hijau gradasi */
  body {
    margin: 0;
    padding: 0;
    background: radial-gradient(circle at top, #c9f7d5, #a1e6bb, #5cbf87);
    font-family: 'Poppins', sans-serif;
    color: #033d1a;
    overflow-x: hidden;
  }

  canvas#stars {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: -1;
  }

  .container { margin-top: 30px; position: relative; z-index: 2; }

  /* Efek logo bercahaya bulat */
  .logo {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 10px;
    position: relative;
  }
  .logo img {
    height: 120px;
    border-radius: 50%;
    box-shadow: 0 0 40px 10px rgba(0,255,128,0.4);
    animation: glow 3s infinite alternate ease-in-out;
  }
  @keyframes glow {
    0% { box-shadow: 0 0 25px 5px rgba(0,255,128,0.3); }
    50% { box-shadow: 0 0 60px 20px rgba(0,255,128,0.6); }
    100% { box-shadow: 0 0 30px 10px rgba(0,255,128,0.3); }
  }

  h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #035d2a;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }

  .card {
    background-color: #f5fff8ee;
    border: 2px solid #c8ebd4;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    border-radius: 15px;
  }

  .table thead {
    background-color: #007a33;
    color: white;
  }
  .table-striped tbody tr:nth-of-type(odd) {
    background-color: #e9f7ef;
  }

  .btn-success {
    background-color: #28a745;
    border: none;
  }
  .btn-success:hover {
    background-color: #218838;
  }
  .btn-primary {
    background-color: #007a33;
    border: none;
  }
  .btn-primary:hover {
    background-color: #006226;
  }

  .summary, .stats {
    margin-top: 30px;
    background: #ffffffdd;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    border-left: 6px solid #007a33;
  }
  ul { list-style: none; padding-left: 0; }
  ul li::before { content: "üåø "; }
</style>
</head>
<body>

<!-- Canvas background bintang jatuh -->
<canvas id="stars"></canvas>

<div class="container">
  <div class="logo">
    <img src="LOGO SDIT 2023.png" alt="Logo Sekolah">
  </div>
  <h2><b>APLIKASI PENDATAAN MAPPING GURU BADAL</b></h2>

  <!-- Form Input -->
  <div class="card p-3">
    <div class="row g-3">
      <div class="col-md-3">
        <label>Guru yang Membadalkan</label>
        <select id="guruBadal" class="form-select">
          <option value="">Pilih Guru</option>
          <option>YAYAN PUSFITO, S.Pd.</option>
          <option>DINDA AZZAHRA, S.Ag.</option>
          <option>TIARA RESTY HANIYAH</option>
          <option>LUTFIANA</option>
        </select>
      </div>
      <div class="col-md-3">
        <label>Guru yang Digantikan</label>
        <select id="guruDigantikan" class="form-select">
          <option value="">Pilih Guru</option>
          <option>SITI MUTMAINAH, S.Pd.I</option>
          <option>ABDULLAH, S.Pd.I</option>
          <option>NENGSI KAROMAH, S.Pd</option>
          <option>JARIYAH, S.Pd.I</option>
          <option>MARFU‚ÄôAH, S.Pd</option>
          <option>ZULFA MAULIDA, S.Pd.I</option>
          <option>EVA NOPIANTI, S.Pd</option>
          <option>EKA DWI CHIKITA, S.S</option>
          <option>NURFAUZIYAH, S.Pd</option>
          <option>UMI KULSUM, S.Pd</option>
          <option>MAESARO, S.Pd</option>
          <option>AYU RIANTI, S.Pd</option>
          <option>SELLY HALIMATUS SADIAH, S.Ag</option>
          <option>PIDA NIRMALASARI, S.Pd</option>
          <option>HANI YULIAN WAHYUNI, S.Pd</option>
          <option>INAYA ILAHANNA, S.Pd</option>
          <option>IBNU HAJAR</option>
          <option>IMAS WIDIYA, S.Pd</option>
          <option>NOVI LISNOPIAWATI, S.Pd</option>
          <option>RIZKY AMALIAH, S.Pd</option>
          <option>SALSABILA FIKRIYA HAKIM</option>
          <option>A. MIFTACHUL ULUM</option>
          <option>AHMAD NUR ASHOB</option>
          <option>RISKA HANDAYANI, S.Pd</option>
          <option>ADILLA SEPTI RIZQIANA AJI, S.Hum., M.Pd</option>
          <option>FAMI ALFITRI</option>
          <option>GITA LARASATI, S.Pd</option>
          <option>LAILATIS SYARIFAH</option>
          <option>AKHMAD NAJIB</option>
          <option>HIKMAH PUJIATI, S.Pd.I</option>
          <option>FAIZ HASBULLAH</option>
          <option>AHMAD JUNAEDI</option>
          <option>ABDUL SALAM</option>
          <option>MUHAMMAD DERIS FADILLAH</option>
          <option>MUHAMMAD FARID HASANUDDIN</option>
          <option>KHILYATUL MASHUN</option>
          <option>LUTFIANA</option>
          <option>TIARA RESTY HANIYAH</option>
        </select>
      </div>
      <div class="col-md-2">
        <label>Kelas</label>
        <select id="kelas" class="form-select">
          <option value="">Pilih Kelas</option>
          <option>1A</option><option>1B</option>
          <option>2A</option><option>2B</option>
          <option>3A</option><option>3B</option>
          <option>4A</option><option>4B</option>
          <option>5A</option><option>5B</option>
          <option>6A</option><option>6B</option>
        </select>
      </div>
      <div class="col-md-2">
        <label>Tugas yang Diemban</label>
        <select id="tugas" class="form-select">
          <option value="">Pilih Tugas</option>
          <option>MAPEL</option>
          <option>HALAQOH</option>
          <option>MAPEL DAN HALAQOH</option>
        </select>
      </div>
      <div class="col-md-2">
        <label>Jumlah Jam Dibadalin</label>
        <input type="number" id="jamBadal" class="form-control" min="1" value="1">
      </div>
      <div class="col-md-2">
        <label>Tanggal Badal</label>
        <input type="date" id="tanggalBadal" class="form-control">
      </div>
    </div>

    <div class="mt-3 text-end">
      <button class="btn btn-success" onclick="tambahData()">Tambah Data</button>
      <button class="btn btn-primary" onclick="downloadExcel()">Download Excel</button>
    </div>
  </div>

  <!-- Tabel Data -->
  <div class="table-responsive mt-4">
    <table id="badalTable" class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>No</th>
          <th>Hari</th>
          <th>Tanggal</th>
          <th>Guru Membadalkan</th>
          <th>Guru Digantikan</th>
          <th>Kelas</th>
          <th>Tugas</th>
          <th>Jam Dibadalin</th>
          <th>Aksi</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Statistik -->
  <div class="summary">
    <h4>üìä Statistik Umum</h4>
    <p><b>Total Kelas Dibadal:</b> <span id="totalKelasBadal">0</span></p>
    <p><b>Total Jam Dibadalin:</b> <span id="totalJamBadal">0</span></p>
  </div>

  <div class="stats mt-3">
    <h4>üë©‚Äçüè´ Daftar Guru Membadalkan & Jumlahnya</h4>
    <ul id="listGuruBadal"></ul>
    <h4 class="mt-3">üë®‚Äçüè´ Daftar Guru yang Digantikan & Jumlahnya</h4>
    <ul id="listGuruDigantikan"></ul>
  </div>
</div>

<script>
let data = [];
function getHari(tanggal){const hari=['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];const d=new Date(tanggal);return hari[d.getDay()];}
function tambahData(){
  const guruBadal=document.getElementById("guruBadal").value;
  const guruDigantikan=document.getElementById("guruDigantikan").value;
  const kelas=document.getElementById("kelas").value;
  const tugas=document.getElementById("tugas").value;
  const jam=parseFloat(document.getElementById("jamBadal").value);
  const tanggal=document.getElementById("tanggalBadal").value;
  if(!guruBadal||!guruDigantikan||!kelas||!tugas||!tanggal){alert("Semua kolom harus diisi!");return;}
  const hari=getHari(tanggal);
  data.push({hari,tanggal,guruBadal,guruDigantikan,kelas,tugas,jam});
  renderTable();
}
function renderTable(){
  const tbody=document.querySelector("#badalTable tbody");
  tbody.innerHTML="";
  data.forEach((item,index)=>{
    tbody.innerHTML+=`<tr><td>${index+1}</td><td>${item.hari}</td><td>${item.tanggal}</td><td>${item.guruBadal}</td><td>${item.guruDigantikan}</td><td>${item.kelas}</td><td>${item.tugas}</td><td>${item.jam}</td><td><button class='btn btn-danger btn-sm' onclick='hapusData(${index})'>Hapus</button></td></tr>`;
  });
  updateStats();
}
function hapusData(i){data.splice(i,1);renderTable();}
function updateStats(){
  document.getElementById("totalKelasBadal").textContent=data.length;
  document.getElementById("totalJamBadal").textContent=data.reduce((a,b)=>a+b.jam,0);
  const guruBadalCount={},guruDigantikanCount={};
  data.forEach(d=>{
    guruBadalCount[d.guruBadal]=(guruBadalCount[d.guruBadal]||0)+1;
    guruDigantikanCount[d.guruDigantikan]=(guruDigantikanCount[d.guruDigantikan]||0)+1;
  });
  const listGuruBadal=document.getElementById("listGuruBadal");
  const listGuruDigantikan=document.getElementById("listGuruDigantikan");
  listGuruBadal.innerHTML=""; listGuruDigantikan.innerHTML="";
  for(const[guru,count]of Object.entries(guruBadalCount)){listGuruBadal.innerHTML+=`<li>${guru}: ${count} kali</li>`;}
  for(const[guru,count]of Object.entries(guruDigantikanCount)){listGuruDigantikan.innerHTML+=`<li>${guru}: ${count} kali</li>`;}
}
function downloadExcel(){
  const ws=XLSX.utils.json_to_sheet(data);
  const wb=XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb,ws,"Data Badal");
  XLSX.writeFile(wb,"Data_Mapping_Guru_Badal.xlsx");
}

/* Efek bintang jatuh dinamis */
const canvas=document.getElementById('stars');
const ctx=canvas.getContext('2d');
let stars=[];
function resize(){canvas.width=window.innerWidth;canvas.height=window.innerHeight;}
window.addEventListener('resize',resize);
resize();

function createStar(){
  return{ x:Math.random()*canvas.width, y:Math.random()*canvas.height, len:Math.random()*80+20, speed:Math.random()*4+2, opacity:Math.random()*0.8+0.2 };
}
for(let i=0;i<50;i++){stars.push(createStar());}

function drawStars(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(s=>{
    ctx.beginPath();
    const grad=ctx.createLinearGradient(s.x,s.y,s.x-s.len,s.y-s.len);
    grad.addColorStop(0,`rgba(255,255,255,${s.opacity})`);
    grad.addColorStop(1,'rgba(255,255,255,0)');
    ctx.strokeStyle=grad;
    ctx.lineWidth=2;
    ctx.moveTo(s.x,s.y);
    ctx.lineTo(s.x-s.len,s.y-s.len);
    ctx.stroke();
    s.x+=-s.speed; s.y+=-s.speed;
    if(s.x<0||s.y<0){Object.assign(s,createStar(),{x:canvas.width,y:canvas.height*Math.random()});}
  });
  requestAnimationFrame(drawStars);
}
drawStars();
</script>

</body>
</html>
